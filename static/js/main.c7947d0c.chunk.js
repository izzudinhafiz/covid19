(this["webpackJsonpreact-covid-tracker"]=this["webpackJsonpreact-covid-tracker"]||[]).push([[0],{31:function(e,t,a){e.exports={gridContainer:"CountryPicker_gridContainer__3GS8J",buttonLocation:"CountryPicker_buttonLocation__22lws",formControl:"CountryPicker_formControl__26lxt"}},46:function(e,t,a){e.exports={container:"Chart_container__31DQU"}},47:function(e,t,a){e.exports={container:"App_container__2XUGd"}},51:function(e,t,a){e.exports=a(82)},8:function(e,t,a){e.exports={container:"Cards_container__3b3I5",card:"Cards_card__3LkJT",infected:"Cards_infected__MaZs5",recovered:"Cards_recovered__2EChl",deaths:"Cards_deaths__guyns",counter:"Cards_counter__1dl8E",confirmedDelta:"Cards_confirmedDelta__3Mvqg",recoveredDelta:"Cards_recoveredDelta__10T_e",deathsDelta:"Cards_deathsDelta__2DGH5"}},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),i=a(7),s=a.n(i),d=a(12),u=a(25),l=a(26),m=a(29),p=a(28),f=a(101),h=a(106),v=a(102),y=a(103),b=a(15),x=a.n(b),C=a(30),E=a.n(C),g=a(8),w=a.n(g),_=function(e){var t=e.data,a=t.confirmed,n=t.recovered,c=t.deaths,o=t.lastUpdate,i=e.timeSeries,s=i[i.length-1],d=i[i.length-2],u={confirmed:a,recovered:n,deaths:c,lastUpdate:o},l={confirmed:a,recovered:n,deaths:c};return a?(u.confirmed=s.confirmed,u.recovered=s.recovered,u.deaths=s.deaths,u.lastUpdate=new Date("".concat(s.date,"T12:00:00+00:00")).toDateString(),l.confirmed=u.confirmed-d.confirmed,l.recovered=u.recovered-d.recovered,l.deaths=u.deaths-d.deaths):(u.confirmed=0,u.recovered=0,u.deaths=0,u.lastUpdate=(new Date).toDateString(),l.confirmed=0,l.recovered=0,l.deaths=0),r.a.createElement("div",{className:w.a.container},r.a.createElement(f.a,{container:!0,justify:"center"},r.a.createElement(f.a,{item:!0,component:h.a,xs:12,md:3,className:E()(w.a.card,w.a.infected)},r.a.createElement(v.a,null,r.a.createElement(y.a,{color:"textSecondary",gutterBottom:!0},"Infected"),r.a.createElement("div",{className:w.a.counter},r.a.createElement(y.a,{variant:"h5"},r.a.createElement(x.a,{start:0,end:u.confirmed,duration:.5,separator:","})),r.a.createElement(y.a,{variant:"subtitle1",className:w.a.confirmedDelta},"+",r.a.createElement(x.a,{start:0,end:l.confirmed,duration:.5,separator:","}))),r.a.createElement(y.a,{color:"textSecondary"},"Updated: ",u.lastUpdate))),r.a.createElement(f.a,{item:!0,component:h.a,xs:12,md:3,className:E()(w.a.card,w.a.recovered)},r.a.createElement(v.a,null,r.a.createElement(y.a,{color:"textSecondary",gutterBottom:!0},"Recovered"),r.a.createElement("div",{className:w.a.counter},r.a.createElement(y.a,{variant:"h5"},r.a.createElement(x.a,{start:0,end:u.recovered,duration:.5,separator:","})),r.a.createElement(y.a,{variant:"subtitle1",className:w.a.recoveredDelta},"+",r.a.createElement(x.a,{start:0,end:l.recovered,duration:.5,separator:","}))),r.a.createElement(y.a,{color:"textSecondary"},"Updated: ",u.lastUpdate))),r.a.createElement(f.a,{item:!0,component:h.a,xs:12,md:3,className:E()(w.a.card,w.a.deaths)},r.a.createElement(v.a,null,r.a.createElement(y.a,{color:"textSecondary",gutterBottom:!0},"Deaths"),r.a.createElement("div",{className:w.a.counter},r.a.createElement(y.a,{variant:"h5"},r.a.createElement(x.a,{start:0,end:u.deaths,duration:.5,separator:","})),r.a.createElement(y.a,{variant:"subtitle1",className:w.a.deathsDelta},"+",r.a.createElement(x.a,{start:0,end:l.deaths,duration:.5,separator:","}))),r.a.createElement(y.a,{color:"textSecondary"},"Updated: ",u.lastUpdate)))))},k=a(45),D=a(46),S=a.n(D),O=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).chartRef=r.a.createRef(),n.state={windowWidth:window.innerWidth},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(){e.setState({windowWidth:window.innerWidth})}));var t=this.props.data;this.myChart=new k.Chart(this.chartRef.current,{type:"line",data:{labels:t.map((function(e){e.date;return new Date})),datasets:[{data:t.map((function(e){return e.confirmed})),label:"Infected",borderColor:"#3333ff",fill:!0},{data:t.map((function(e){return e.recovered})),label:"Recovered",borderColor:"green",backgroundColor:"rgba(0, 255, 0, 0.5)",fill:!0},{data:t.map((function(e){return e.deaths})),label:"Deaths",borderColor:"red",backgroundColor:"rgba(255, 0, 0, 0.5)",fill:!0}]},options:{maintainAspectRatio:!(this.state.windowWidth<=500),scales:{xAxes:[{ticks:{fontSize:this.state.windowWidth<=500?10:12},type:"time",time:{displayFormats:{day:"MMM DD"},stepSize:this.state.windowWidth<=500?14:7}}],yAxes:[{ticks:{callback:function(e,t,a){var n=Math.floor(Math.log(a[0])/Math.log(1e3));if(n>0){var r=["k","M","B","T"][n-1];return e/Math.pow(1e3,n)+r}return e},fontSize:this.state.windowWidth<=500?10:12}}]}}})}},{key:"componentDidUpdate",value:function(){var e=this.props.data;this.myChart.data.labels=e.map((function(e){var t=e.date;return new Date(t)})),this.myChart.data.datasets[0].data=e.map((function(e){return e.confirmed})),this.myChart.data.datasets[1].data=e.map((function(e){return e.recovered})),this.myChart.data.datasets[2].data=e.map((function(e){return e.deaths})),this.state.windowWidth<=500?(this.myChart.options.scales.yAxes[0].ticks.fontSize=10,this.myChart.options.maintainAspectRatio=!1,this.myChart.options.scales.xAxes[0].time.stepSize=14):(this.myChart.options.scales.yAxes[0].ticks.fontSize=12,this.myChart.options.maintainAspectRatio=!0,this.myChart.options.scales.xAxes[0].time.stepSize=7),this.myChart.update()}},{key:"render",value:function(){return r.a.createElement("div",{className:S.a.container},r.a.createElement("canvas",{id:"myChart",ref:this.chartRef}))}}]),a}(r.a.Component),j=a(48),U=a(107),M=a(104),N=a(105),A=a(16),B=a.n(A),L="https://covidapi.info/api/v1/global",R=function(){var e=Object(d.a)(s.a.mark((function e(t){var a,n,r,c,o,i,d,u,l,m,p,f,h,v,y;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return e.prev=1,e.next=4,B.a.get("".concat("https://covidapi.info/api/v1","/country/").concat(t,"/latest"));case 4:return a=e.sent,n=a.data.result,r=Object.keys(n)[0],c=n[r],o=c.confirmed,i=c.deaths,d=c.recovered,e.abrupt("return",{confirmed:o,recovered:d,deaths:i,lastUpdate:r});case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:e.next=33;break;case 16:return e.prev=16,e.next=19,B.a.get(L);case 19:return u=e.sent,l=u.data,m=l.date,p=l.result,f=p.confirmed,h=p.deaths,v=p.recovered,y=m,e.abrupt("return",{confirmed:f,recovered:v,deaths:h,lastUpdate:y});case 30:e.prev=30,e.t1=e.catch(16),console.log(e.t1);case 33:case"end":return e.stop()}}),e,null,[[1,11],[16,30]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(s.a.mark((function e(t){var a,n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t?"".concat("https://covidapi.info/api/v1","/country/").concat(t):"".concat(L,"/count"),e.next=4,B.a.get(a);case 4:return n=e.sent,r=n.data.result,c=Object.keys(r).map((function(e,t){var a=r[e],n=a.confirmed,c=a.deaths,o=a.recovered;return n?{confirmed:n,deaths:c,recovered:o,date:e}:null})),e.abrupt("return",c.filter((function(e){return e})));case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(s.a.mark((function e(){var t,a,n,r,c,o,i,d,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get("".concat(L,"/latest"));case 3:return t=e.sent,a=t.data.result,n=a.map((function(e){return Object.keys(e)[0]})),r="https://restcountries.eu/rest/v2/alpha?codes=",n.forEach((function(e){r=r.concat(e,";")})),e.next=10,B.a.get(r);case 10:for(c=e.sent,o=(o=c.data).filter((function(e){return e})),i=o.map((function(e){return{name:e.name,iso3:e.alpha3Code,iso2:e.alpha2Code}})),d=0;d<i.length;d++)(u=i[d]).name.indexOf("(")>0&&(u.name=u.name.split("(")[0]),u.name.indexOf(" and ")>0&&(u.name=u.name.split(" and ")[0]),u.name.indexOf(",")>0&&(u.name=u.name.split(",")[0]),"GBR"===u.iso3?u.name="United Kingdom":"VNM"===u.iso3?u.name="Vietnam":"KOR"===u.iso3?u.name="South Korea":"LAO"===u.iso3&&(u.name="Laos");return e.abrupt("return",i.sort((function(e,t){return e.name>t.name?1:-1})));case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get("https://ipinfo.io?token=b092506d1e5aeb");case 3:return t=e.sent,a=t.data.country,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),W=a(31),I=a.n(W),J=function(e){var t=e.handleCountryChange,a=Object(n.useState)([]),c=Object(j.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)((function(){(function(){var e=Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,z();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var u=function(){var e=Object(d.a)(s.a.mark((function e(){var a,n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=document.getElementById("country-select"),"GLOBAL"===(n=document.getElementById("button-location")).innerText){e.next=10;break}return e.next=5,G();case 5:r=e.sent,-1!==(c=o.map((function(e){return e.iso2})).indexOf(r))&&(a.value=o[c].iso3,n.innerText="Global"),e.next=12;break;case 10:n.innerText="My Country",a.value="";case 12:t(a.value);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(f.a,{container:!0,spacing:1,className:I.a.gridContainer},r.a.createElement(f.a,{item:!0},r.a.createElement(U.a,{className:I.a.formControl},r.a.createElement(M.a,{id:"country-select",defaultValue:"",onChange:function(e){!function(e){var a=document.getElementById("button-location");t(e.target.value),""!==e.target.value&&"GLOBAL"!==a.innerText?a.innerText="Global":a.innerText="My Country"}(e)}},r.a.createElement("option",{value:""},"Global"),o?o.map((function(e){return r.a.createElement("option",{key:e.name,value:e.iso3},e.name)})):null))),r.a.createElement(f.a,{item:!0},r.a.createElement(N.a,{id:"button-location",variant:"contained",size:"small",disableElevation:!0,color:"primary",onClick:u,className:I.a.buttonLocation},"My Country")))},K=a(47),P=a.n(K),V=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={latestData:{},timeSeriesData:[],country:""},e.handleCountryChange=function(){var t=Object(d.a)(s.a.mark((function t(a){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(a);case 2:return n=t.sent,t.next=5,T(a);case 5:r=t.sent,e.setState({latestData:n,country:a,timeSeriesData:r});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return t=e.sent,e.next=5,T(this.state.country);case 5:a=e.sent,this.setState({latestData:t,timeSeriesData:a}),G();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:P.a.container},r.a.createElement(_,{data:this.state.latestData,timeSeries:this.state.timeSeriesData}),r.a.createElement(J,{handleCountryChange:this.handleCountryChange}),r.a.createElement(O,{data:this.state.timeSeriesData,country:this.state.country}),r.a.createElement("div",{style:{paddingTop:20,textAlign:"center"}},"Source: Johns Hopkins University, Center for Systems Science and Engineering (via covidapi.info)"))}}]),a}(r.a.Component);o.a.render(r.a.createElement(V,null),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.c7947d0c.chunk.js.map